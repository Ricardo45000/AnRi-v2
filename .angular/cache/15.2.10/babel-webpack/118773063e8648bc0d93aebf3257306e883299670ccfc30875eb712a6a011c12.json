{"ast":null,"code":"import _asyncToGenerator from \"/Users/ricardoda-silva/Desktop/Project/RiAn/AnRi v2/node_modules/@babel/runtime/helpers/esm/asyncToGenerator.js\";\nimport { ComponentFactoryResolver, ViewContainerRef } from '@angular/core';\nimport Chart from 'chart.js';\nimport { DashboardService } from './service/dashboard.service';\nimport { AuthserviceService } from 'environments/airtable/authservice.service';\nimport { Router } from '@angular/router';\nimport { SharedService } from 'app/shared/service/shared.service';\nimport { RegularTableComponent } from 'app/tables/regulartable/regulartable.component';\nimport { TranslateService } from '@ngx-translate/core';\nimport * as i0 from \"@angular/core\";\nimport * as i1 from \"app/shared/service/shared.service\";\nimport * as i2 from \"./service/dashboard.service\";\nimport * as i3 from \"environments/airtable/authservice.service\";\nimport * as i4 from \"@angular/router\";\nimport * as i5 from \"@ngx-translate/core\";\nexport let DashboardComponent = /*#__PURE__*/(() => {\n  class DashboardComponent {\n    sharedService;\n    dashboardService;\n    authService;\n    router;\n    resolver;\n    viewContainerRef;\n    translate;\n    constructor(sharedService, dashboardService, authService, router, resolver, viewContainerRef, translate) {\n      this.sharedService = sharedService;\n      this.dashboardService = dashboardService;\n      this.authService = authService;\n      this.router = router;\n      this.resolver = resolver;\n      this.viewContainerRef = viewContainerRef;\n      this.translate = translate;\n      this.translate.setDefaultLang(\"en\");\n    }\n    isLoading = false;\n    canvas;\n    ctx;\n    chartData;\n    regularTableComponentRef;\n    ngOnInit() {\n      if (this.authService.checkConnection()) {\n        this.initializeChart();\n        this.loadData();\n        this.initiateRegularTableComponent();\n      } else {\n        this.router.navigate(['/pages/amazon']);\n      }\n      // Subscribe to language changes\n      this.translate.onLangChange.subscribe(() => {\n        this.loadData();\n      });\n    }\n    initiateRegularTableComponent() {\n      // Create a factory for RegularTableComponent\n      const factory = this.resolver.resolveComponentFactory(RegularTableComponent);\n      // Create the component\n      this.regularTableComponentRef = this.viewContainerRef.createComponent(factory);\n      // Access the instance of the component and call its methods\n      const regularTableComponentInstance = this.regularTableComponentRef.instance;\n      regularTableComponentInstance.ngOnInit(); // Manually call ngOnInit\n      // Example: Manually call a method of RegularTableComponent\n      regularTableComponentInstance.filterByRating(5);\n      // Hide the component discreetly\n      this.regularTableComponentRef.location.nativeElement.style.display = 'none';\n    }\n    initializeChart() {\n      this.canvas = document.getElementById(\"activeUsers\");\n      this.canvas.height = 250;\n      this.ctx = this.canvas.getContext(\"2d\");\n    }\n    loadData() {\n      var _this = this;\n      return _asyncToGenerator(function* () {\n        _this.chartData = yield _this.dashboardService.getChartData(_this.ctx);\n        _this.createChart();\n      })();\n    }\n    createChart() {\n      new Chart(this.ctx, {\n        type: 'line',\n        data: this.chartData,\n        options: {\n          legend: {\n            display: true\n          },\n          tooltips: {\n            enabled: true\n          },\n          responsive: true,\n          maintainAspectRatio: false,\n          scales: {\n            yAxes: [{\n              ticks: {\n                fontColor: \"#9f9f9f\",\n                beginAtZero: true,\n                maxTicksLimit: 10,\n                stepSize: 1\n              },\n              gridLines: {\n                drawBorder: false,\n                zeroLineColor: \"transparent\",\n                color: 'rgba(255,255,255,0.05)'\n              }\n            }],\n            dataset: [{\n              barPercentage: 1.6,\n              gridLines: {\n                drawBorder: true,\n                color: 'rgba(255,255,255,0.1)',\n                zeroLineColor: \"transparent\",\n                display: true\n              },\n              ticks: {\n                padding: 20,\n                fontColor: \"#9f9f9f\"\n              }\n            }]\n          }\n        }\n      });\n    }\n    calculateAverageStars() {\n      return this.dashboardService.calculateAverageStars();\n    }\n    counterStarsRating(nbstars) {\n      return this.dashboardService.counterStarsRating(nbstars);\n    }\n    currentYear() {\n      return new Date().getFullYear();\n    }\n    numberOfComments() {\n      return this.dashboardService.numberOfComments();\n    }\n    filterRating(rating) {\n      this.router.navigate(['/tables/all']);\n      this.sharedService.sendFilterRating(rating);\n    }\n    static ɵfac = function DashboardComponent_Factory(t) {\n      return new (t || DashboardComponent)(i0.ɵɵdirectiveInject(i1.SharedService), i0.ɵɵdirectiveInject(i2.DashboardService), i0.ɵɵdirectiveInject(i3.AuthserviceService), i0.ɵɵdirectiveInject(i4.Router), i0.ɵɵdirectiveInject(i0.ComponentFactoryResolver), i0.ɵɵdirectiveInject(i0.ViewContainerRef), i0.ɵɵdirectiveInject(i5.TranslateService));\n    };\n    static ɵcmp = /*@__PURE__*/i0.ɵɵdefineComponent({\n      type: DashboardComponent,\n      selectors: [[\"app-dashboard\"]],\n      decls: 100,\n      vars: 17,\n      consts: [[1, \"main-content\", 2, \"padding-bottom\", \"-50px\"], [1, \"row\"], [1, \"col-lg-4\"], [1, \"card\", \"card-stats\"], [\"onclick\", \"window.location.href='#/advanced'\", 1, \"card-body\", \"star-clickable\"], [1, \"col-6\", \"col-md-6\"], [1, \"icon-big\", \"text-center\", \"icon-warning\"], [1, \"fas\", \"fa-balance-scale\", \"text-warning\"], [1, \"col-6\", \"col-md-6\", \"d-flex\", \"align-items-center\", \"justify-content-center\", \"mx-auto\"], [1, \"numbers\", \"text-center\", \"mx-auto\"], [1, \"card-category\"], [1, \"card-title\"], [1, \"card-body\", \"star-clickable\", 3, \"click\"], [1, \"col-8\", \"col-md-8\", 2, \"font-size\", \"35%\"], [1, \"fas\", \"fa-star\", \"text-warning\"], [1, \"col-4\", \"col-md-4\", \"d-flex\", \"align-items-center\", \"justify-content-center\", \"mx-auto\"], [1, \"col-md-12\"], [1, \"card\"], [1, \"card-header\"], [1, \"col-sm-7\"], [1, \"numbers\", \"pull-left\"], [1, \"col-sm-5\"], [1, \"pull-right\"], [\"onclick\", \"window.location.href='#/advanced'\", 1, \"badge\", \"badge-pill\", \"badge-success\", \"star-clickable\"], [1, \"card-body\"], [1, \"big-title\"], [\"id\", \"activeUsers\"]],\n      template: function DashboardComponent_Template(rf, ctx) {\n        if (rf & 1) {\n          i0.ɵɵelementStart(0, \"div\", 0)(1, \"div\", 1)(2, \"div\", 2)(3, \"div\", 3)(4, \"div\", 4)(5, \"div\", 1)(6, \"div\", 5)(7, \"div\", 6);\n          i0.ɵɵelement(8, \"i\", 7);\n          i0.ɵɵelementEnd()();\n          i0.ɵɵelementStart(9, \"div\", 8)(10, \"div\", 9)(11, \"p\", 10);\n          i0.ɵɵtext(12);\n          i0.ɵɵpipe(13, \"translate\");\n          i0.ɵɵelementEnd();\n          i0.ɵɵelementStart(14, \"p\", 11);\n          i0.ɵɵtext(15);\n          i0.ɵɵelementEnd()()()()()()();\n          i0.ɵɵelementStart(16, \"div\", 2)(17, \"div\", 3)(18, \"div\", 12);\n          i0.ɵɵlistener(\"click\", function DashboardComponent_Template_div_click_18_listener() {\n            return ctx.filterRating(5);\n          });\n          i0.ɵɵelementStart(19, \"div\", 1)(20, \"div\", 13)(21, \"div\", 6);\n          i0.ɵɵelement(22, \"i\", 14)(23, \"i\", 14)(24, \"i\", 14)(25, \"i\", 14)(26, \"i\", 14);\n          i0.ɵɵelementEnd()();\n          i0.ɵɵelementStart(27, \"div\", 15)(28, \"div\", 9)(29, \"p\", 11);\n          i0.ɵɵtext(30);\n          i0.ɵɵelementEnd()()()()()()();\n          i0.ɵɵelementStart(31, \"div\", 2)(32, \"div\", 3)(33, \"div\", 12);\n          i0.ɵɵlistener(\"click\", function DashboardComponent_Template_div_click_33_listener() {\n            return ctx.filterRating(4);\n          });\n          i0.ɵɵelementStart(34, \"div\", 1)(35, \"div\", 13)(36, \"div\", 6);\n          i0.ɵɵelement(37, \"i\", 14)(38, \"i\", 14)(39, \"i\", 14)(40, \"i\", 14);\n          i0.ɵɵelementEnd()();\n          i0.ɵɵelementStart(41, \"div\", 15)(42, \"div\", 9)(43, \"p\", 11);\n          i0.ɵɵtext(44);\n          i0.ɵɵelementEnd()()()()()()();\n          i0.ɵɵelementStart(45, \"div\", 2)(46, \"div\", 3)(47, \"div\", 12);\n          i0.ɵɵlistener(\"click\", function DashboardComponent_Template_div_click_47_listener() {\n            return ctx.filterRating(3);\n          });\n          i0.ɵɵelementStart(48, \"div\", 1)(49, \"div\", 13)(50, \"div\", 6);\n          i0.ɵɵelement(51, \"i\", 14)(52, \"i\", 14)(53, \"i\", 14);\n          i0.ɵɵelementEnd()();\n          i0.ɵɵelementStart(54, \"div\", 15)(55, \"div\", 9)(56, \"p\", 11);\n          i0.ɵɵtext(57);\n          i0.ɵɵelementEnd()()()()()()();\n          i0.ɵɵelementStart(58, \"div\", 2)(59, \"div\", 3)(60, \"div\", 12);\n          i0.ɵɵlistener(\"click\", function DashboardComponent_Template_div_click_60_listener() {\n            return ctx.filterRating(2);\n          });\n          i0.ɵɵelementStart(61, \"div\", 1)(62, \"div\", 13)(63, \"div\", 6);\n          i0.ɵɵelement(64, \"i\", 14)(65, \"i\", 14);\n          i0.ɵɵelementEnd()();\n          i0.ɵɵelementStart(66, \"div\", 15)(67, \"div\", 9)(68, \"p\", 11);\n          i0.ɵɵtext(69);\n          i0.ɵɵelementEnd()()()()()()();\n          i0.ɵɵelementStart(70, \"div\", 2)(71, \"div\", 3)(72, \"div\", 12);\n          i0.ɵɵlistener(\"click\", function DashboardComponent_Template_div_click_72_listener() {\n            return ctx.filterRating(1);\n          });\n          i0.ɵɵelementStart(73, \"div\", 1)(74, \"div\", 13)(75, \"div\", 6);\n          i0.ɵɵelement(76, \"i\", 14);\n          i0.ɵɵelementEnd()();\n          i0.ɵɵelementStart(77, \"div\", 15)(78, \"div\", 9)(79, \"p\", 11);\n          i0.ɵɵtext(80);\n          i0.ɵɵelementEnd()()()()()()()();\n          i0.ɵɵelementStart(81, \"div\", 1)(82, \"div\", 16)(83, \"div\", 17)(84, \"div\", 18)(85, \"div\", 1)(86, \"div\", 19)(87, \"div\", 20);\n          i0.ɵɵtext(88);\n          i0.ɵɵelementEnd()();\n          i0.ɵɵelementStart(89, \"div\", 21)(90, \"div\", 22)(91, \"span\", 23);\n          i0.ɵɵtext(92);\n          i0.ɵɵpipe(93, \"translate\");\n          i0.ɵɵelementEnd()()()()();\n          i0.ɵɵelementStart(94, \"div\", 24)(95, \"h6\", 25);\n          i0.ɵɵtext(96);\n          i0.ɵɵpipe(97, \"translate\");\n          i0.ɵɵelementEnd();\n          i0.ɵɵelementStart(98, \"div\");\n          i0.ɵɵelement(99, \"canvas\", 26);\n          i0.ɵɵelementEnd()()()()()();\n        }\n        if (rf & 2) {\n          i0.ɵɵadvance(12);\n          i0.ɵɵtextInterpolate(i0.ɵɵpipeBind1(13, 11, \"Average\"));\n          i0.ɵɵadvance(3);\n          i0.ɵɵtextInterpolate(ctx.calculateAverageStars());\n          i0.ɵɵadvance(15);\n          i0.ɵɵtextInterpolate(ctx.counterStarsRating(5));\n          i0.ɵɵadvance(14);\n          i0.ɵɵtextInterpolate(ctx.counterStarsRating(4));\n          i0.ɵɵadvance(13);\n          i0.ɵɵtextInterpolate1(\"\", ctx.counterStarsRating(3), \" \");\n          i0.ɵɵadvance(12);\n          i0.ɵɵtextInterpolate(ctx.counterStarsRating(2));\n          i0.ɵɵadvance(11);\n          i0.ɵɵtextInterpolate1(\"\", ctx.counterStarsRating(1), \" \");\n          i0.ɵɵadvance(8);\n          i0.ɵɵtextInterpolate1(\" \", ctx.numberOfComments(), \" \");\n          i0.ɵɵadvance(4);\n          i0.ɵɵtextInterpolate1(\" \", i0.ɵɵpipeBind1(93, 13, \"Comparison\"), \" \");\n          i0.ɵɵadvance(4);\n          i0.ɵɵtextInterpolate2(\"\", i0.ɵɵpipeBind1(97, 15, \"TotalReviewDashboard\"), \" \", ctx.currentYear(), \"\");\n        }\n      },\n      dependencies: [i5.TranslatePipe],\n      encapsulation: 2\n    });\n  }\n  return DashboardComponent;\n})();","map":null,"metadata":{},"sourceType":"module","externalDependencies":[]}